(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return d}));var a=n(8),r=n.n(a),u=n(59),o=n(9),s=n(17),c={posts:[{id:1,message:"Hi, how are you?",likesCount:"1"},{id:2,message:"It` s my first post",likesCount:"23"},{id:3,message:"OK",likesCount:"10"}],newPostText:"",profile:null,status:""},i=function(e){return{type:"UPDATE_STATUS",status:e}},l=function(e){return{type:"ADD_POST",newPostText:e}},f=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(s.b.getProfile(e));case 2:n=a.sent,t({type:"SET_PROFILE",profile:n});case 4:case"end":return a.stop()}}))}},m=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(s.b.getStatus(e));case 2:n=a.sent,t({type:"SET_STATUS",status:n});case 4:case"end":return a.stop()}}))}},d=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(s.b.updateStatus(e));case 2:0===n.sent.resultCode&&t(i(e));case 4:case"end":return n.stop()}}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_STATUS":case"SET_STATUS":return Object(o.a)({},e,{status:t.status});case"SET_PROFILE":return Object(o.a)({},e,{profile:t.profile});case"ADD_POST":var n={id:5,message:t.newPostText,likesCount:2};return Object(o.a)({},e,{posts:[].concat(Object(u.a)(e.posts),[n]),newPostText:""});default:return e}}},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(59),r=n(9),u={messages:[{id:1,message:"Hi"},{id:2,message:"Bla Bla Bla"},{id:3,message:"Bla Bla Bla"},{id:4,message:"Bla Bla Bla"},{id:5,message:"YO"}],dialogs:[{id:1,name:"Aleksey"},{id:2,name:"Evgenyi"},{id:3,name:"Nelli"},{id:4,name:"Dmitryi"},{id:5,name:"Valera"}]},o=function(e){return{type:"ADD_MESSAGE",message:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":var n={id:6,message:t.message};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}}},125:function(e,t,n){e.exports={content:"Content_content__12MBE"}},128:function(e,t,n){e.exports={formError:"Login_formError__ppIa9"}},130:function(e,t,n){e.exports=n.p+"static/media/sample (1).3bd3d6a5.gif"},157:function(e,t,n){e.exports=n(284)},162:function(e,t,n){},163:function(e,t,n){},17:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(127),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"df34564f-9b39-458a-a367-5df81c8b67f3"}}),u={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return r.post("/follow/".concat(e),{}).then((function(e){return e.data}))},unfollow:function(e){return r.delete("/follow/".concat(e)).then((function(e){return e.data}))}},o={getProfile:function(e){return r.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/ "+e).then((function(e){return e.data}))},updateStatus:function(e){return r.put("profile/status/ ",{status:e}).then((function(e){return e.data}))}},s={getMeData:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return r.delete("auth/login").then((function(e){return e.data}))}}},284:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(55),o=n.n(u),s=(n(162),n(163),n(32)),c=n.n(s),i=n(11),l=function(){return r.a.createElement("div",{className:c.a.navbar},r.a.createElement("div",null,r.a.createElement(i.b,{className:c.a.item,to:"/profile"}," Profile ")),r.a.createElement("div",null,r.a.createElement(i.b,{className:c.a.item,to:"/dialogs"},"Dialogs")),r.a.createElement("div",null,r.a.createElement(i.b,{className:c.a.item,to:"/users"},"Users")),r.a.createElement("div",null,r.a.createElement(i.b,{className:c.a.item,to:"/news"},"News")),r.a.createElement("div",null,r.a.createElement(i.b,{className:c.a.item,to:"/music"},"Music")),r.a.createElement("div",null,"Settings"))},f=n(125),m=n.n(f),d=n(27),p=n(12),g=n(31),E=n.n(g),b=n(122),h=n(45),v=n.n(h),S=function(e){for(var t=Math.ceil(e.totalItemsCount/e.pageSize),n=[],u=1;u<=t;u++)n.push(u);var o=Math.ceil(t/e.portionSize),s=Object(a.useState)(1),c=Object(b.a)(s,2),i=c[0],l=c[1],f=(i-1)*e.portionSize+1,m=i*e.portionSize;return r.a.createElement("div",{className:v.a.paginator},i>1&&r.a.createElement("button",{className:v.a.button,onClick:function(){l(i-1)}}," 1..."),n.filter((function(e){return e>=f&&e<=m})).map((function(t){return r.a.createElement("span",{className:e.currentPage===t&&v.a.selectedPage,onClick:function(){e.setCurrentPage(t)}},"  ",t)})),o>i&&r.a.createElement("button",{className:v.a.button,onClick:function(){l(i+1)}},"...",t))},_=function(e){return r.a.createElement("div",{className:E.a.item},r.a.createElement(i.b,{to:"/profile/"+e.user.id},r.a.createElement("img",{className:E.a.item,alt:e.alt,src:null!=e.user.photos.small?e.user.photos.small:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpFKVKjW3oHGcYaDd0rjQvEgK0bZxw0HvXZ7GHqNXQ96xPMoCuig&s"})),r.a.createElement("div",null,e.user.name),r.a.createElement("div",null,e.user.id),r.a.createElement("div",null,e.user.status),r.a.createElement("div",null,e.user.followed?r.a.createElement("button",{className:E.a.button,onClick:function(){e.unfollowThunk(e.user.id)}},"unfollow"):r.a.createElement("button",{className:E.a.button,onClick:function(){e.followThunk(e.user.id)}},"follow")))},w=function(e){var t=e||{},n=t.users,u=t.totalUsersCount,o=t.currentPage,s=t.pageSize,c=t.getUsersThunk,i=t.setCurrentPage,l=t.portionSize,f=t.followThunk,m=t.unfollowThunk;return Object(a.useEffect)((function(){c(o,s)}),[o,s,c]),r.a.createElement("div",{className:E.a.item},r.a.createElement(S,{pageSize:s,totalItemsCount:u,currentPage:o,setCurrentPage:i,portionSize:l}),r.a.createElement("div",null,n.map((function(e){return r.a.createElement(_,{key:e.id,user:e,followThunk:f,unfollowThunk:m})}))))},O=n(8),T=n.n(O),P=n(9),C=n(17),y=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(P.a)({},e,{},a):e}))},x={users:[],pageSize:10,totalUsersCount:0,currentPage:1,portionSize:15,isFetching:!1,followingInProgress:[]},j=function(e){return{type:"SET_USERS",users:e}},A=function(e){return{type:"FOLLOW",userId:e}},N=function(e){return{type:"UNFOLLOW",userId:e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_TOTAL_COUNT":return Object(P.a)({},e,{totalUsersCount:t.totalCount});case"SET_CURRENT_PAGE":return Object(P.a)({},e,{currentPage:t.currentPage});case"SET_USERS":return Object(P.a)({},e,{users:t.users});case"FOLLOW":return Object(P.a)({},e,{users:y(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(P.a)({},e,{users:y(e.users,t.userId,"id",{followed:!1})});default:return e}},U=n(7),I=function(e){return e.usersPage.users},z=function(e){return e.usersPage.pageSize},D=function(e){return e.usersPage.totalUsersCount},L=function(e){return e.usersPage.currentPage},M=function(e){return e.usersPage.portionSize},B=Object(U.d)(Object(p.b)((function(e){return{users:I(e),pageSize:z(e),totalUsersCount:D(e),currentPage:L(e),portionSize:M(e)}}),{followThunk:function(e){return function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(C.c.follow(e));case 2:0===n.sent.resultCode&&t(A(e));case 4:case"end":return n.stop()}}))}},unfollowThunk:function(e){return function(t){return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(C.c.unfollow(e));case 2:0===n.sent.resultCode&&t(N(e));case 4:case"end":return n.stop()}}))}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setUsers:j,getUsersThunk:function(e,t){return function(n){var a;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.a.awrap(C.c.getUsers(e,t));case 2:a=r.sent,n(j(a.items)),n({type:"SET_USERS_TOTAL_COUNT",totalCount:a.totalCount});case 5:case"end":return r.stop()}}))}}}))(w),F=n(128),R=n.n(F),G=n(120),H=n(121),K=n(46),W={userId:null,login:null,email:null,isAuth:!1},Q=function(e,t){return{type:"SET_ME_DATA",data:e,isAuth:t}},Z=function(){return function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.awrap(C.a.getMeData());case 2:0===(t=n.sent).resultCode&&e(Q(t.data,!0));case 4:case"end":return n.stop()}}))}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ME_DATA":return Object(P.a)({},e,{},t.data,{isAuth:t.isAuth});default:return e}},X=n(56),Y=n(41),J=Object(H.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(G.a,{placeholder:"Email",name:"email",component:X.a,validate:[Y.b,Y.c]})),r.a.createElement("div",null,r.a.createElement(G.a,{placeholder:"Password",name:"password",component:X.a,type:"password",validate:[Y.a,Y.c]})),r.a.createElement("div",null,r.a.createElement(G.a,{type:"checkbox",name:"rememberMe",component:X.a})," remember me"),e.error&&r.a.createElement("div",{className:R.a.formError},e.error),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),V=Object(p.b)((function(e){return{isAuth:e.auth.isAuth}}),{loginThunk:function(e,t,n){return function(a){var r,u;return T.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,T.a.awrap(C.a.login(e,t,n));case 2:0===(r=o.sent).resultCode?a(Z()):(u=r.messages.length>0?r.messages[0]:"Common error",a(Object(K.a)("login",{_error:u})));case 4:case"end":return o.stop()}}))}}})((function(e){return e.isAuth?r.a.createElement(d.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"LOGIN"),r.a.createElement(J,{onSubmit:function(t){e.loginThunk(t.email,t.password,t.rememberMe)}}))})),$=n(58),ee=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement($.a,null)},r.a.createElement(e,t))}},te=r.a.lazy((function(){return n.e(3).then(n.bind(null,290))})),ne=r.a.lazy((function(){return n.e(4).then(n.bind(null,291))})),ae=function(){return r.a.createElement("div",{className:m.a.content},r.a.createElement(d.b,{path:"/profile/:userId?",render:ee(te)}),r.a.createElement(d.b,{path:"/dialogs",render:ee(ne)}),r.a.createElement(d.b,{path:"/users",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(d.b,{path:"/login",render:function(){return r.a.createElement(V,null)}}))},re=n(86),ue=n.n(re),oe=function(e){return r.a.createElement("div",{className:ue.a.item},r.a.createElement("div",{className:ue.a.login},e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{onClick:e.logoutThunk},"log out")):r.a.createElement(i.b,{to:"/login"},"LOGIN")),r.a.createElement("div",null,r.a.createElement("img",{alt:"",src:"http://brend-logo.ru/assets/976fb447/images/cssp_logo.png"})))},se=Object(p.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logoutThunk:function(){return function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.awrap(C.a.logout());case 2:0===t.sent.resultCode&&e(Q(Object(P.a)({},W),!1));case 4:case"end":return t.stop()}}))}}})(oe),ce={initialized:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(P.a)({},e,{initialized:!0});default:return e}},le=Object(U.d)(d.f,Object(p.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e(Z()),n.next=3,T.a.awrap(Promise.all([t]));case 3:e({type:"INITIALIZED_SUCCESS"});case 4:case"end":return n.stop()}}))}}}))((function(e){return Object(a.useEffect)(e.initializeApp,[]),e.initialized?r.a.createElement("div",{className:"wrapper"},r.a.createElement(se,null),r.a.createElement(l,null),r.a.createElement(ae,null)):r.a.createElement($.a,null)})),fe=n(118),me=n(119),de=n(131),pe=n(123),ge=Object(U.c)({profilePage:fe.b,dialogsPage:me.b,usersPage:k,auth:q,form:pe.a,app:ie}),Ee=Object(U.e)(ge,Object(U.a)(de.a));o.a.render(r.a.createElement(i.a,null,r.a.createElement(p.a,{store:Ee},r.a.createElement(le,null))),document.getElementById("root"))},31:function(e,t,n){e.exports={item:"Users_item__FpQv6",button:"Users_button__3srbl"}},32:function(e,t,n){e.exports={navbar:"Navbar_navbar__1QGuo",item:"Navbar_item__ifva8"}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u}));var a=function(e){if(e&&e.length>15)return"Max length is 15 symbols"},r=function(e){if(e&&e.length>40)return"Max length is 40 symbols"},u=function(e){if(!e)return"Field is required"}},45:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__1oHbW",paginator:"Paginator_paginator__3O6SK",button:"Paginator_button__3expC"}},56:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n(87),r=n(0),u=n.n(r),o=n(83),s=n.n(o),c=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),o=n.touched&&n.error;return u.a.createElement("div",{className:o?s.a.error:""},u.a.createElement("div",null,u.a.createElement("textarea",Object.assign({},t,r))),u.a.createElement("div",null,o&&u.a.createElement("span",null,n.error)))},i=function(e){var t=e.input,n=e.meta,r=Object(a.a)(e,["input","meta"]),o=n.touched&&n.error;return u.a.createElement("div",{className:o?s.a.error:""},u.a.createElement("div",null,u.a.createElement("input",Object.assign({},t,r))),u.a.createElement("div",null,o&&u.a.createElement("span",null,n.error)))}},58:function(e,t,n){"use strict";var a=n(0),r=n.n(a),u=n(130),o=n.n(u);t.a=function(e){return r.a.createElement("img",{src:o.a,alt:e.alt})}},83:function(e,t,n){e.exports={error:"FormControls_error__2sgA6"}},86:function(e,t,n){e.exports={item:"Header_item__2jUKX",login:"Header_login__3lW8C"}}},[[157,1,2]]]);
//# sourceMappingURL=main.9b8977c9.chunk.js.map